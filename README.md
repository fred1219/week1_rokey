# week1_rokey

협동-1: ROS2를 활용한 로봇 자동화 공정 시스템 구현 프로젝트

## 💻 Project
'25.05.14 - '25.05.21 (8일) , 개발인원 4명
### [프로젝트 개요]
조선, 반도체 등 우리나라 제조업의 핵심 산업에서는 고정밀 용접 기술의 수요가 지속적으로 증가하고 있습니다. 그러나 숙련 인력의 감소와 작업 환경의 열악함으로 인해 용접 공정의 자동화가 절실한 상황입니다. 이에 따라 본 프로젝트에서는 협동로봇을 활용한 용접 자동화 시스템을 개발하여 인력난 해소와 생산성 향상을 도모하고자 하였습니다. 이에 협동로봇을 활용한 용접 자동화 시스템 구축 프로젝트를 기획하였습니다.

### [역할] : 

### [프로젝트 개요]
다양한 유형의 용접기능 지원: 규칙적인 2D, 불규칙적인 2D, 규칙적인 3D 용접 기능 지원
ROS2 노드 및 토픽 통신 구현: 실시간 로봇 위치(posx, posj) 수신 및 표시
Doosan API를 활용한 로봇 이동 제어: movej(posj(...)) 명령으로 홈 위치 이동 기능 구현
Tkinter 기반 GUI: 실시간 좌표 확인, 캡처, 복사, CSV 저장, 궤적 계산 기능 포함

### [기능]
- #### 규칙적인 2D
  노드를 UI와 구동제어 2가지로 분리
  UI(클라이언트), M0609(서버) 서비스 구조로 요청,응답을 통해 직접교시 모드 활성화.
  UI => save_posx 버튼을 통해 원하는 지점(시작점, 도착점)을 설정.
  지점(좌표) 설정과 동시에 M0609에서 현재좌표 토픽[/dsr01/msg/current_posx(Float64MultiArray)]을 publish받아 saved_posx 1, 2 변수에 저장.
  위치좌표가 기록된 saved_posx 1, 2 변수를 토픽[/saved_posx_pair(Float64MultiArray)]으로 발행.
  구동제어 노드에서 해당 좌표 데이터를 구독함. 좌표 수신 완료까지 대기(비동기 이벤트 대기 방식<=자세히)
  좌표 수신이 완료되면 M0609로 이동명령 노드[/dsr01//posx_mover]를 발행하여 모션 동작.
  
  
- #### 불규칙적인 2D
  용접할 부분의 도면이나, 센서 등으로 용접로봇이 이동할 경로 정보를 얻어올 수 있다는 시나리오 가정
  따라서 경로에 대한 이미지가 있다는 가정하에 ui에서 이미지를 불러오는 과정부터 시작함.
  이미지 선택 후 용접 포인트 추출버튼을 누르면 이미지 경로에 대해 x,y좌표 추출.
  x,y추출 좌표들을 x축 기준 일정 간격(조정 가능) 정렬하여 sampled 변수에 할당.
  이동 경로 좌표인 sampled 변수(이동 경로 좌표 데이터)를 weld_points.csv로 데이터 로그 저장.
  weld_points.csv에 기록된 x,y를 불러와 이동명령 movel 수행.
  이때 csv에서 불러온 데이터값은 string이므로 float로 재선언, 조인트 rx,ry,rz를 고정값을 주어 pos 변수로 재할당
  
- #### 규칙적인 3D
  a_home.py, movec.py 코드 분리(gui 기능에서 쓰레드 충돌문제로 노드 분리)

  
- #### 안전기능

  
